= content_for :title, t('survey.labels.worker_progress_chard_title')
- content_for :page_title, t('survey.labels.worker_progress_chard_title')
.survey-result-dash-container
  .container
    .row
      .col-md-12
        .row.survey-subjects{data:{step: 2, intro: t("guideline.worker.survey_take.step2.content")}}
          .survey-subject
            .radio-box
              %input{:type=>"radio", :name => "subject_id", :id => "radio1", :style => "display: none;", value: 10, 'data-current_role': 'manager'}
              %label{:for => "radio1"}
                = image_tag 'survey-bodily.png', class: 'img'
              .row.survey-title
                %span Infection preventive cleaning of Bodily Fluid
          .survey-subject
            .radio-box
              %input{:type=>"radio", :name => "subject_id", :id => "radio2", :style => "display: none;", value: 10, 'data-current_role': 'manager'}
              %label{:for => "radio2"}
                = image_tag 'survey-preventive.png', class: 'img'
              .row.survey-title
                %span Infection preventive Diapering
          .survey-subject
            .radio-box
              %input{:type=>"radio", :name => "subject_id", :id => "radio3", :style => "display: none;", value: 10, 'data-current_role': 'manager'}
              %label{:for => "radio3"}
                = image_tag 'survey-handling.png', class: 'img'
              .row.survey-title
                %span Infection Preventive food handling
          .survey-subject
            .radio-box
              %input{:type=>"radio", :name => "subject_id", :id => "radio4", :style => "display: none;", value: 10, 'data-current_role': 'manager'}
              %label{:for => "radio4"}
                = image_tag 'survey-washing.png', class: 'img'
              .row.survey-title
                %span Infection preventive Hand Hygene
          .survey-subject
            .radio-box
              %input{:type=>"radio", :name => "subject_id", :id => "radio5", :style => "display: none;", value: 10, 'data-current_role': 'manager'}
              %label{:for => "radio5"}
                = image_tag 'survey-control.png', class: 'img'
              .row.survey-title
                %span Inpfection preventive Outbreak Control
        .row.survey-charts
          #progress_charts_partial
            .col-md-12
              %h4 Food Storage Qa
              .progress
                .progress-inner-trans
                  .progress-inner
                    .progress-inner-back
                      .progress-bar{:style => "width: #{103.0-((30.to_f)/100.0) * 103.0}%;"}
                        %span
                          %p 30%
            .col-md-12
              %h4 Proper Hygiene Practices Qa
              .progress
                .progress-inner-trans
                  .progress-inner
                    .progress-inner-back
                      .progress-bar{:style => "width: #{103.0-((60.to_f)/100.0) * 103.0}%;"}
                        %span
                          %p 60%
            .col-md-12
              %h4 Special Precautions Food Qa
              .progress
                .progress-inner-trans
                  .progress-inner
                    .progress-inner-back
                      .progress-bar{:style => "width: #{103.0-((90.to_f)/100.0) * 103.0}%;"}
                        %span
                          %p 90%
        .row.text-center.form-buttons
          =submit_tag 'Retake Test', :class => 'btn btn-lightred'
/ Modal
#dash_step_1
  .modal-dialog
    / Modal content
    .modal-content
      .modal-header
        %button.close.plainmodal-close{"data-dismiss" => "modal", :type => "button"} Ã—
        %h4.modal-title= t('guideline.worker.dashboard.survey.take.title').html_safe
      .modal-body          
        %p= t('guideline.worker.dashboard.survey.take.content').html_safe
      .modal-footer
        %button.btn.btn-lightred.link-dash-step{"data-dismiss" => "modal", :type => "button", 'data-step' => '1'} Next            
:javascript
  jQuery(document).ready(function() {
    var effect = {
        open: function(duration, complete) {
          this.css({
            display:          'block',
            opacity:          0,
            top:              -50 - this.outerHeight(),
            marginTop:        0
          })
          .animate({opacity: 1, top: 100}, duration, complete);
        },
        close: function(duration, complete) {
          this.animate({
            opacity:          0,
            top:              -50 - this.outerHeight()
          }, duration, function() {
            $(this).css({display: 'none'});
            complete();
          });
        }
      };

    modalStep1 = $('#dash_step_1').plainModal({effect: effect, duration: 500});

    dash_wizard();

    function dash_wizard(){
      modalStep1 = $('#dash_step_1').plainModal('open', {force: true});
    }

    $('#link_dashboard_guide').on('click', function(){
      dash_wizard();
    });       

    $('.link-dash-step').click(function(e){
      var cur_step = $(this).data('step');
      var modal;
      switch(cur_step){
      case 1:
        modal = eval('modalStep' + cur_step);
        modal.plainModal('close', {force: true});
        gotoTakeSurvey();
        break;
      }            
      e.preventDefault();
    });

    function gotoTakeSurvey(){
      healthChildcare.guideline.introGoToStep('take_step2', "#{t('form_labels.next')}", "#{t('form_labels.back')}", "#{t('form_labels.intro_done')}", "#{t('form_labels.intro_skip')}");
    }
  });                  